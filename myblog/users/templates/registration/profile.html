{% extends 'base.html' %}
{% load static %}

{% block content %}

<h1>{{ user.username }}</h1> 

{% if user.profile.profile_picture %}
    <img src="{{ user.profile.profile_picture.url }}" 
         alt="Profile Picture" 
         style="max-width: 180px;">
{% else %}
    <p>No picture available.</p>
{% endif %}

{% if user.profile.bio %}
    <p>{{ user.profile.bio }}</p>
{% else %}
    <p>No bio available.</p>
{% endif %}
<a href="{% url 'profile-edit' %}">Edit Profile</a> <br/>

<strong>Followers:</strong><br/>
{% for follow in profile.user.followers.all %}
    @{{ follow.follower }}<br/>
{% empty %}
    <p>No followers yet.</p>
{% endfor %}
<br/>

<strong>Following:</strong><br/>
{% for follow in profile.user.following.all %}
    @{{ follow.following }}<br/>
{% empty %}
    <p>Not following anyone yet.</p>
{% endfor %}
<br/>

<strong>Available Users:</strong><br/>
{% for user in users %}
    <strong>@{{ user.username }}</strong>
    {% if user != request.user %}
    {% if is_follower %}
        <form method="post" action="{% url 'unfollow_user' profile.user.id %}">
            {% csrf_token %}
            <button type="submit">Unfollow</button>
        </form>
    {% else %}
        <form method="post" action="{% url 'follow_user' profile.user.id %}">
            {% csrf_token %}
            <button type="submit">Follow</button>
        </form>
    {% endif %}
    {% endif %}
    <br/>
{% empty %}
    <p>No other users available.</p>
{% endfor %}


{% endblock %}
